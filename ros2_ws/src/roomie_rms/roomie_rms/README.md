# roomie_rms Module

## 1. κ°μ”

### 1.1 λ©ν‘
- λ΅λ΄‡ μ»¨νΈλ΅¤λ¬(RC)μ™€ ROS2 ν†µμ‹ μ„ ν†µν• μ‹¤μ‹κ°„ μ μ–΄
- PyQt6 κΈ°λ° λ°μ¤ν¬ν†± GUIμ™€ μ΄μ¤‘ ν†µμ‹  λ°©μ‹ μ κ³µ:
  - **HTTP API**: λ™κΈ°μ‹ λ°μ΄ν„° μ”μ²­/μ‘λ‹µ (μ„¤μ •, μ΅°ν, λ…λ Ή)
  - **WebSocket**: λΉ„λ™κΈ°μ‹ μ‹¤μ‹κ°„ μ΄λ²¤νΈ (μƒνƒ, μ•λ¦Ό, μ¤νΈλ¦¬λ°)
- MySQL λ°μ΄ν„°λ² μ΄μ¤λ¥Ό ν†µν• λ°μ΄ν„° κ΄€λ¦¬ λ° λ΅κ·Έ μ €μ¥
- λ©”μΈ μ„λ²„λ¥Ό ν†µν• λ΅λ΄‡ κ΄€λ¦¬ μ‹μ¤ν…

### 1.2 μ£Όμ” κΈ°λ¥
- **ROS2 ν†µμ‹ **: λ΅λ΄‡ μ»¨νΈλ΅¤λ¬μ™€μ μ‹¤μ‹κ°„ λ…λ Ή/μƒνƒ κµν™
- **μ΄μ¤‘ ν†µμ‹  λ°©μ‹**:
  - **HTTP API**: RESTful λ°©μ‹μ λ™κΈ°μ‹ λ°μ΄ν„° μ²λ¦¬
  - **WebSocket**: μ‹¤μ‹κ°„ μ΄λ²¤νΈ μ¤νΈλ¦¬λ°
- **λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™**: λ΅λ΄‡, μ‘μ—…, μ„μΉ, μ£Όλ¬Έ μ •λ³΄ κ΄€λ¦¬
- **ν†µν•© λ°μ΄ν„° κ΄€λ¦¬**: λ™κΈ°/λΉ„λ™κΈ° λ°μ΄ν„° νλ¦„ ν†µν•© κ΄€λ¦¬

## 2. μ‹μ¤ν… μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   HTTP API       β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    ROS2      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Desktop GUI    β”‚ β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ί β”‚   RMS Node      β”‚ β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ί β”‚ Robot Controllerβ”‚
β”‚   (PyQt6)       β”‚                  β”‚  (Hybrid)       β”‚              β”‚  (ROS2)         β”‚
β”‚                 β”‚   WebSocket      β”‚                 β”‚              β”‚                 β”‚
β”‚                 β”‚ β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ί β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚              β”‚                 β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                  β”‚ β”‚ FastAPI     β”‚ β”‚              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                     β”‚ β”‚ Server      β”‚ β”‚
                                     β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
                                     β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
                                     β”‚ β”‚ ROS2 Node   β”‚ β”‚
                                     β”‚ β”‚ (rclpy)     β”‚ β”‚
                                     β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
                                     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                             β”‚
                                             β”‚ SQL  
                                             β–Ό
                                     β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                     β”‚   MySQL DB      β”‚
                                     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

π”„ λ°μ΄ν„° νλ¦„:
- GUI β†’ HTTP β†’ RMS Node (FastAPI) β†’ λ‚΄λ¶€ μ²λ¦¬ β†’ RMS Node (ROS2) β†’ Topics β†’ Robot Controller
- Robot Controller β†’ Topics β†’ RMS Node (ROS2) β†’ λ‚΄λ¶€ μ²λ¦¬ β†’ RMS Node (FastAPI) β†’ WebSocket β†’ GUI

## 3. κΈ°μ  μ¤νƒ

### 3.1 λ©”μΈ μ„λ²„ (Backend)
- **μ–Έμ–΄**: Python 3.12
- **μ›Ή ν”„λ μ„μ›ν¬**: FastAPI (HTTP + WebSocket ν†µν•© μ§€μ›)
- **ASGI μ„λ²„**: uvicorn
- **λΉ„λ™κΈ° μ²λ¦¬**: asyncio
- **ROS2 ν΄λΌμ΄μ–ΈνΈ**: rclpy
- **λ°μ΄ν„°λ² μ΄μ¤**: MySQL 8.0 + mysql-connector-python

### 3.2 GUI μ• ν”λ¦¬μΌ€μ΄μ… (Frontend)
- **μ–Έμ–΄**: Python 3.12
- **GUI ν”„λ μ„μ›ν¬**: PyQt6
- **HTTP ν΄λΌμ΄μ–ΈνΈ**: QNetworkAccessManager
- **WebSocket ν΄λΌμ΄μ–ΈνΈ**: QWebSocket

### 3.3 λ΅λ΄‡ μ»¨νΈλ΅¤λ¬
- **ROS2 Distribution**: Jazzy Jalopy
- **ν†µμ‹  λ°©μ‹**: Topics, Services, Actions

## 4. μ‹μ¤ν… κµ¬μ„± μ”μ†

### 4.1 Roomie Main Server(RMS) λ¨λ“
```
roomie_rms/
β””β”€β”€ roomie_rms/
    β”β”€β”€ __init__.py
    β”β”€β”€ rms_node.py         # ROS2 Node μ§„μ…μ 
    β””β”€β”€ app/                # FastAPI Server
        β”β”€β”€ __init__.py
        β”β”€β”€ main.py         # FastAPI μ•± μƒμ„± λ° λΌμ°ν„° ν¬ν•¨
        β”β”€β”€ config.py       # μ„¤μ • κ΄€λ¦¬
        β”β”€β”€ routers/        # API μ—”λ“ν¬μΈνΈ μ •μ
        β”‚   β”β”€β”€ __init__.py
        β”‚   β”β”€β”€ rc_router.py    # λ΅λ΄‡ μ»¨νΈλ΅¤λ¬ API
        β”‚   β””β”€β”€ gui_router.py   # GUI ν΄λΌμ΄μ–ΈνΈ API
        β”‚
        β”β”€β”€ services/       # λΉ„μ¦λ‹μ¤ λ΅μ§
        β”‚   β”β”€β”€ __init__.py
        β”‚   β”β”€β”€ websocket_manager.py  # WebSocket κ΄€λ¦¬μ
        β”‚   β””β”€β”€ db_manager.py         # λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ¦¬μ
        β”‚
        β”β”€β”€ schemas/        # λ°μ΄ν„° λ¨λΈ (Pydantic)
        β”‚   β”β”€β”€ __init__.py
        β”‚   β”β”€β”€ rc_models.py    # λ΅λ΄‡ μ»¨νΈλ΅¤λ¬ λ°μ΄ν„° λ¨λΈ (ROS2 msgs κµ¬μ΅°)
        β”‚   β””β”€β”€ gui_models.py   # GUI λ°μ΄ν„° λ¨λΈ (μ”μ²­-μ‘λ‹µ json κµ¬μ΅°)
        β”‚
        β””β”€β”€ utils/          # κΈ°νƒ€ μ ν‹Έλ¦¬ν‹°
            β”β”€β”€ __init__.py
            β””β”€β”€ logger.py
```

